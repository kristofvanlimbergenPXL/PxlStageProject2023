<div class="pt-4 px-4 pb-2 mt-4 mx-4">
  <div class="d-flex justify-content-between mx-4">
    <div class="float-left">
      <mat-form-field class="float-left">
        <mat-label>Filter op naam</mat-label>
        <input matInput type="text" [formControl]="filterInput" />
      </mat-form-field>

    </div>
    <div class="d-flex gap-2">
      <button class="btn btn-primary btn-sm d-flex ms-auto justify-content-center align-items-center my-2 px-3"
        (click)="openFile()">
        Studenten CSV import
        <input id="import" type="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
          style="display: none" (change)="importStudents($event)" />
      </button>
      <button class="btn btn-primary btn-sm d-flex ms-auto justify-content-center align-items-center my-2 px-3"
        (click)="addStudent()">
        Student toevoegen
      </button>
    </div>
  </div>

  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 shadow-sm w-100 mt-2">
    <colgroup>
      <col class="w-5" />
      <col class="w-5" />
      <col class="w-5" />
      <col class="w-5" />
      <col class="w-5" />
      <col class="w-25 align-items-start" />
      <col class="w-5" />
    </colgroup>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Naam</th>
      <td mat-cell *matCellDef="let student">
        {{ student.lastName }} {{ student.firstName }}
      </td>
    </ng-container>

    <ng-container matColumnDef="studentAddress">
      <th mat-header-cell *matHeaderCellDef>Adres</th>
      <td mat-cell *matCellDef="let student">
        {{ student.street }} {{ student.houseNumber }},
        {{ student.postalCode }} {{ student.township }}
      </td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>PXL e-mail</th>
      <td mat-cell *matCellDef="let student">{{ student.email }}</td>
    </ng-container>

    <ng-container matColumnDef="phoneNumber">
      <th mat-header-cell *matHeaderCellDef>Telefoonnummer</th>
      <td mat-cell *matCellDef="let student">{{ student.phoneNumber }}</td>
    </ng-container>

    <ng-container matColumnDef="stagevoorstel">
      <th mat-header-cell *matHeaderCellDef>Stagevoorstel</th>
      <td mat-cell *matCellDef="let student" (click)="onProposalClick($event, student.proposal.id)">
        {{ student.proposal?.title.substring(0, 20) }}...
      </td>
    </ng-container>

    <ng-container matColumnDef="modelTraject">
      <th mat-header-cell *matHeaderCellDef>Modeltraject</th>
      <td mat-cell *matCellDef="let student">
        <span *ngIf="student.modelTraject"><mat-icon>done</mat-icon></span>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="headers"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns" (click)="onRowClick(row)"></tr>

    <ng-container *matNoDataRow>
      <td class="mat-cell" [attr.colspan]="displayedColumns.length">
        <figure class="d-flex flex-column justify-content-center align-items-center mb-5 overflow-hidden nodata">
          <img
            src="https://cdn.dribbble.com/users/1753953/screenshots/3818675/media/f59ed80d5c527e2461d8ba49adc36160.gif">
          <figcaption>Helaas, er werd geen data gevonden.</figcaption>
        </figure>
      </td>
    </ng-container>
  </table>


  <mat-paginator #paginator [pageSizeOptions]="[10, 25, 50]" showFirstLastButtons
    aria-label="Select page of periodic elements">
  </mat-paginator>
</div>

<div class="disable-background" *ngIf="isLoading === true"></div>
<mat-spinner class="spinner" *ngIf="isLoading === true"></mat-spinner>