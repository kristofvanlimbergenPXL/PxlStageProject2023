<div class="pt-4 px-4 pb-2 mt-4 mx-4">
  <div class="d-flex justify-content-between mb-3 mx-4">
    <mat-form-field class="float-left w-25">
      <mat-label>Filter op bedrijf of titel</mat-label>
      <input matInput type="text" [formControl]="filterInput" />
    </mat-form-field>

    <div class="d-flex justify-content-end gap-5 align-items-center">
      <mat-slide-toggle class="text-muted" (change)="filterMails($event)"
        >e-mail ontvangen</mat-slide-toggle
      >

      <mat-form-field>
        <mat-label>Filter op status</mat-label>
        <mat-select (selectionChange)="filterStatus($event)">
          <mat-option>Geen filter</mat-option>
          <mat-option *ngFor="let status of statuses" [value]="status">{{
            status | statusToDisplayName
          }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  <table
    mat-table
    [dataSource]="dataSource"
    class="mat-elevation-z8 shadow-sm w-100 mt-2"
  >
    <colgroup>
      <col class="w-25" />
      <col />
      <col class="w-10" />
      <col class="w-5" />
      <col class="w-10" />
    </colgroup>

    <ng-container matColumnDef="companyName">
      <th mat-header-cell *matHeaderCellDef="">Bedrijf</th>
      <td mat-cell *matCellDef="let proposal">{{ proposal.companyName }}</td>
    </ng-container>

    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef="">Titel</th>
      <td mat-cell *matCellDef="let proposal">{{ proposal.title }}</td>
    </ng-container>

    <ng-container matColumnDef="submissionDate">
      <th mat-header-cell *matHeaderCellDef="">Indiening</th>
      <td mat-cell *matCellDef="let proposal">
        {{ proposal.submissionDate | date : "dd-MM-yyyy" }}
      </td>
    </ng-container>

    <ng-container matColumnDef="hasMail">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let proposal">
        <span *ngIf="proposal.hasNewMails"><mat-icon>email</mat-icon></span>
      </td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef="">Status</th>
      <td mat-cell *matCellDef="let proposal">
        <div
          class="px-2 py-1 text-center rounded-pill"
          [style.background-color]="proposal.status | statusToColor"
        >
          {{ proposal.status | statusToDisplayName }}
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="headers"></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns"
      (click)="onRowClick(row)"
    ></tr>

    <ng-container *matNoDataRow>
      <td class="mat-cell" [attr.colspan]="displayedColumns.length">
        <figure
          class="d-flex flex-column justify-content-center align-items-center mb-5 overflow-hidden nodata"
        >
          <img
            src="https://cdn.dribbble.com/users/1753953/screenshots/3818675/media/f59ed80d5c527e2461d8ba49adc36160.gif"
          />
          <figcaption>Helaas, er werd geen data gevonden.</figcaption>
        </figure>
      </td>
    </ng-container>
  </table>

  <mat-paginator
    #paginator
    [pageSizeOptions]="[10, 25, 50]"
    showFirstLastButtons
    aria-label="Select page of periodic elements"
  >
  </mat-paginator>
</div>
